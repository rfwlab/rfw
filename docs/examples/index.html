<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>rfw - Welcome</title>
        <link rel="stylesheet" href="/tailwind.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark-dimmed.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
            rel="stylesheet"
        />
    </head>

    <body class="bg-lightbg dark:bg-darkbg text-black dark:text-white">
        <div id="app"></div>
        <script src="/wasm_exec.js"></script>
        <script src="/wasm_loader.js"></script>
        <script>
            const go = new Go();
            WasmLoader.load("/app.wasm?" + Date.now(), {
                go: go,
                color: "#ff0000",
                height: "4px",
                blur: "4px",
            }).then(() => {
                const jsPlugin = {
                    router: (p) => console.log("js navigate ->", p),
                    store: (m, s, k, v) =>
                        console.log(`js store ${m}/${s}: ${k}=${v}`),
                    mount: (n) => console.log("js mount", n),
                    unmount: (n) => console.log("js unmount", n),
                };
                if (typeof rfwRegisterPlugin === "function") {
                    rfwRegisterPlugin(jsPlugin);
                }
            });

            function updateState(newValue) {
                goUpdateState(newValue);
            }
        </script>
    </body>
</html>
